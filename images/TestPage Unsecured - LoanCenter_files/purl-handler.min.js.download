function PurlHandlerDetails(){this.id=null,this.src=null,this.medium=null,this.campaign=null,this.referrer=null,this.allowedReferrer=!1,this.campaignActivated=!1}function PurlHandlerCookieManager(){this.rootKey="wcc_mkt",this.cookieData={},this.get=function(e){var t=this.getMainObject();if(t=t[e],null===(t=void 0===t?null:t))return t;try{t=JSON.parse(t)}catch(e){return t}return t},this.set=function(e,t){var i=t,a=this.getMainObject();a[e]=i,this.updateMainObject(a)},this.reset=function(){return this.getMainObject()},this.remove=function(e){var t=this.getMainObject();return delete t[e],this.updateMainObject(t),t},this.getRegex=function(){return new RegExp(this.rootKey+"=(.*)")},this.getMainObject=function(){var e=this,t="; "+document.cookie,i=t.split(this.getRegex());if(i.length<2)return this.updateMainObject(this.cookieData),this.getMainObject();i=i[1],i=i.split("; ").splice(0,1)[0],i=this.processCookie(i,!0);try{this.cookieData=JSON.parse(i)}catch(e){this.cookieData={}}var a={};return Object.keys(this.cookieData).map(function(t){try{return a[t]=JSON.parse(e.specialCharProcessor(e.cookieData[t],!0))}catch(e){}return a[t]=e.cookieData[t]}),a},this.updateMainObject=function(e){document.cookie=this.rootKey+"="+this.processCookie(JSON.stringify(e))+"; path=/"},this.specialCharProcessor=function(e,t){var i={" , ":","};void 0!==t&&(t=!1);for(var a=e,r=Object.keys(i),n=0;n<r.length;n++)t||(a=a.replace(r[n],i[r[n]])),t&&(a=a.replace(i[r[n]],r[n]));return a},this.processCookie=function(e,t){return void 0===t&&(t=!1),t?atob(e):btoa(e)}}function PurlHandler(){this.currentXHR=null,this.configuration=window._LoanCenter_PurlConfig._.config,this.devKey="C8C0BB1EA291DC77CB376F2157C6B639C95FC8AAEA1B29415153743EBCD9C160",this.cookieManager=new PurlHandlerCookieManager,this.details=new PurlHandlerDetails,this.requiredParams=["src","medium","campaign","id"],this.initiate=function(){if(null!==this.currentXHR&&void 0!==this.currentXHR&&this.currentXHR.abort(),this.setupParameters())return this.details.referrer=window.document.referrer,this.details.allowedReferrer=this.checkReferrer(),this.details.campaignActivated=this.details.allowedReferrer&&this.campaignEnable(),this.cookieManager.set("details",this.details),this.cookieManager.set("configuration",this.configuration),this.cookieManager.set("campaignActive",this.details.allowedReferrer&&this.campaignEnable()),void(this.details.allowedReferrer&&this.campaignEnable());this.cookieManager.set("campaignActive",!1)},this.setupParameters=function(){var e=!0;for(var t in this.requiredParams){var i=this.requiredParams[t];this.details[i]=this.getParameterByName(i),e&&(e=void 0!==this.details[i]&&null!==this.details[i])}return e},this.getParameterByName=function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=i.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},this.checkReferrer=function(){var e=!1;try{e=new RegExp("^https?://.*("+this.configuration.allowedDomains.join("|")+")/?").test(window.document.referrer),e||(e=this.getParameterByName("disableReferrerCheck")===this.devKey)}catch(e){}return e},this.campaignEnable=function(){var e=!1;try{_META_PURL_CONFIGURATION&&_META_PURL_CONFIGURATION.enable_campaign&&(e="1"===_META_PURL_CONFIGURATION.enable_campaign)}catch(e){}return e},this.purlCampaignActive=function(e){var t=!1,i=this.cookieManager.get("details");return null!==i&&void 0!==i&&null!==i.campaignActivated&&void 0!==i.campaignActivated&&(t=i.campaignActivated&&i.id.toString()===e.toString()),t},this.resetCampaign=function(){this.cookieManager.remove("details")}}window._PurlHandlerInstance=new PurlHandler,window._PurlHandlerInstance.initiate();